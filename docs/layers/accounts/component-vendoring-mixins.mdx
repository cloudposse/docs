---
title: Component Vendoring with Mixins
sidebar_label: Component Vendoring with Mixins
sidebar_position: 7
---

{/* TODO:DEPRECATE-ACCOUNT-MAP - NEW PAGE - Status: Not Started */}

{/*
Required Content:
- How to vendor components with mixins
- provider-without-account-map.tf usage
- account-verification.mixin.tf usage
- component.yaml examples

Source Reference:
- refarch-scaffold/template/components/terraform/component.yaml files
- github.com/cloudposse-terraform-components/mixins
*/}

# Component Vendoring with Mixins

:::info Work in Progress
This documentation is being written as part of the account-map deprecation effort.
:::

## Overview

Components are vendored from upstream repositories with mixins that provide standardized provider configuration without account-map dependencies.

## Mixin Types

### Provider Without Account-Map

The `provider-without-account-map.tf` mixin configures the AWS provider using static account mappings:

```yaml
# component.yaml
spec:
  source:
    uri: github.com/cloudposse-terraform-components/aws-vpc.git//src
    version: v1.537.0
    excluded_paths:
      - "providers.tf"
  mixins:
    - uri: https://raw.githubusercontent.com/cloudposse-terraform-components/mixins/v0.3.0/src/mixins/provider-without-account-map.tf
      filename: providers.tf
```

### Account Verification

The `account-verification.mixin.tf` adds precondition checks to prevent wrong-account deployments:

```yaml
mixins:
  - uri: https://raw.githubusercontent.com/cloudposse-terraform-components/mixins/v0.3.0/src/mixins/account-verification.mixin.tf
    filename: account-verification.mixin.tf
```

## Complete Example

```yaml
# components/terraform/vpc/component.yaml
apiVersion: atmos/v1
kind: ComponentVendorConfig
spec:
  source:
    uri: github.com/cloudposse-terraform-components/aws-vpc.git//src?ref={{.Version}}
    version: v1.537.0
    excluded_paths:
      - "providers.tf"
  mixins:
    - uri: https://raw.githubusercontent.com/cloudposse-terraform-components/mixins/{{.Version}}/src/mixins/provider-without-account-map.tf
      version: v0.3.0
      filename: providers.tf
    - uri: https://raw.githubusercontent.com/cloudposse-terraform-components/mixins/{{.Version}}/src/mixins/account-verification.mixin.tf
      version: v0.3.0
      filename: account-verification.mixin.tf
```

{/* TODO:DEPRECATE-ACCOUNT-MAP - Add more mixin examples */}
{/* TODO:DEPRECATE-ACCOUNT-MAP - Add troubleshooting */}
{/* TODO:DEPRECATE-ACCOUNT-MAP - Add vendoring workflow */}
