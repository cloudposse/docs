---
title: "Deploying AWS Accounts"
sidebar_label: "Deploy Accounts"
sidebar_position: 4
description: Deploy AWS accounts with `atmos` workflows.
---
import Intro from '@site/src/components/Intro';
import KeyPoints from '@site/src/components/KeyPoints';
import Steps from '@site/src/components/Steps';
import Step from '@site/src/components/Step';
import StepNumber from '@site/src/components/StepNumber';
import Note from '@site/src/components/Note';
import AtmosWorkflow from '@site/src/components/AtmosWorkflow';
import TaskList from '@site/src/components/TaskList';
import ActionCard from '@site/src/components/ActionCard';
import PrimaryCTA from '@site/src/components/PrimaryCTA';

<Intro>
This guide walks through deploying AWS accounts using `atmos` workflows. Before starting, ensure you have completed the [Prepare AWS Organization](/layers/accounts/prepare-aws-organization/) guide, which creates the AWS Organization, enables AWS RAM sharing, and raises account limits.
</Intro>

| Steps                        | Actions                                                                     |
| ---------------------------- | --------------------------------------------------------------------------- |
| Validate prerequisites       | Review account configuration                                                |
| Import AWS Organization      | `atmos workflow deploy/organization -f quickstart/foundation/accounts`      |
| Deploy accounts              | `atmos workflow deploy/accounts -f quickstart/foundation/accounts`          |
| Deploy accounts settings     | `atmos workflow deploy/account-settings -f quickstart/foundation/accounts`  |
| Finalize account setup       | Click Ops (optional)                                                        |

<Steps>
  <Step>
    ## <StepNumber/> Validate Prerequisites for Account Deployment

    Before deploying accounts, verify that you have completed all prerequisites from the [Prepare AWS Organization](/layers/accounts/prepare-aws-organization/) guide:

    <TaskList>
    - AWS Organization has been created via ClickOps
    - AWS RAM sharing with AWS Organization is enabled
    - Account quota increase has been requested (and ideally approved)
    - Terraform state backend has been initialized
    </TaskList>

    Next, review the "account" configuration in the stack catalog. **This is the hardest part to change/fix once the accounts are provisioned**. If you aren't confident about the email configuration, account names, or anything else, now is the time to make changes or ask for help.

    You should double-check the following:

    <TaskList>
    - Check that `stacks/catalog/account.yaml` has the values you expect, especially account email format
    - Run `atmos describe component account -s core-gbl-root` to inspect the final component configuration (e.g. _after_ all the mixins have been imported)
    - Plan the run with `atmos terraform plan account -s core-gbl-root`
    </TaskList>
  </Step>

  <Step>
    ## <StepNumber/> Import the AWS Organization

    The AWS Organization was created manually as part of the [Prepare AWS Organization](/layers/accounts/prepare-aws-organization/) guide. Now we need to import this existing organization into Terraform so it can be managed as infrastructure-as-code.

    Run the organization workflow, which will import the existing AWS Organization into Terraform state:

    <AtmosWorkflow workflow="deploy/organization" fileName="quickstart/foundation/accounts" />

    This workflow runs `terraform import` to bring the existing AWS Organization under Terraform management. After this step, all organization-level changes will be managed through Atmos and Terraform.

    :::tip Verify Import
    After the workflow completes, verify the organization was imported successfully:
    ```bash
    atmos terraform plan account -s core-gbl-root
    ```
    The plan should show no changes for the organization resource, indicating it was imported correctly.
    :::
  </Step>

  <Step>
    ## <StepNumber/> Deploy Accounts

    Again review the "account" configuration in `stacks/catalog/account.yaml`. In particular, check the email address and account names. In the next step, we will create and configure all accounts in the AWS Organization using the configuration in that stack file.

    Once confident, begin the accounts deployment:

    <AtmosWorkflow workflow="deploy/accounts" fileName="quickstart/foundation/accounts" />

    This workflow creates all AWS member accounts in the AWS Organization using the configuration in your stack files.

  </Step>

  <Step>
    ## <StepNumber/> Deploy Accounts Settings

    Once you've created the accounts, you'll need to provision the baseline configuration within the accounts themselves. Run the following:

    <AtmosWorkflow workflow="deploy/account-settings" fileName="quickstart/foundation/accounts" />

    The workflows will kick off several sequential Terraform runs to provision all the AWS member account settings for
    member accounts in the Organization.
  </Step>
 
  <Step>
    ## <StepNumber/> Unsubscribe from Marketing Emails (Optional)

    For each new account, unsubscribe the account's email address from AWS marketing emails:

    <Steps>
    1. Go to [AWS Marketing Preferences](https://pages.awscloud.com/communication-preferences.html)
    1. Click "Unsubscribe from Email"
    1. Enter the account's email address
    1. Check "Unsubscribe from all AWS marketing emails"
    </Steps>

    :::tip Root User Credentials
    With [centralized root access](/layers/identity/centralized-root-access/) enabled, member accounts do not require individual root credentials. If you need per-account root credentials, see [Create Account Root Users](/layers/accounts/tutorials/create-account-root-users/).
    :::
  </Step>
</Steps>

<ActionCard title="Next Steps">
  Now that all accounts are deployed and configured, you're ready to set up CloudTrail for audit logging across your organization.
  <PrimaryCTA to="/layers/accounts/setup-cloudtrail">Setup CloudTrail</PrimaryCTA>
</ActionCard>
