---
title: "Using AWS SAML to Access AWS"
sidebar_label: "Setup AWS SAML (Optional)"
sidebar_position: 8
description: Authenticate with AWS via a federated identity using AWS SAML.
---
import Intro from '@site/src/components/Intro';
import KeyPoints from '@site/src/components/KeyPoints';
import Steps from '@site/src/components/Steps';
import Step from '@site/src/components/Step';
import StepNumber from '@site/src/components/StepNumber';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Intro>
  The AWS SAML component allows you to authenticate with AWS via a federated identity. This is an alternative to using AWS SSO, that provides lower-level control over the authentication process and supports multiple concurrent IdPs, but with more complexity and a reduced user experience.
</Intro>

As an alternative to AWS SSO, the AWS SAML creates an Identity Provider (IdP) to authenticate with AWS via a federated
identity. You can use this federated identity to connect directly to a given AWS Team.

# Export an Identity Provider (IdP) metadata file from the chosen provider.

<Steps>
  <Step>
    ## <StepNumber/> Export an Identity Provider (IdP) metadata file from the chosen provider.

    The creation of metadata files will be different for each IdP.

    Here are some example setup references:
    <Tabs queryString="idp">
      <TabItem value="google" label="Google Workspace">
        Follow the [AWS documentation for Google Workspace](https://aws.amazon.com/blogs/desktop-and-application-streaming/setting-up-g-suite-saml-2-0-federation-with-amazon-appstream-2-0/). Once you have completed the setup, download the metadata file.
      </TabItem>

      <TabItem value="okta" label="Okta">
        Follow the [Okta documentation](https://help.okta.com/en-us/Content/Topics/DeploymentGuides/AWS/aws-configure-identity-provider.htm). Once you have completed the setup, download the metadata file.
      </TabItem>

      <TabItem value="jumpcloud" label="Jumpcloud">
       Follow the [JumpCloud documentation](https://support.jumpcloud.com/support/s/article/getting-started-applications-saml-sso2). Once you have completed the setup, download the metadata file.
      </TabItem>

      <TabItem value="office365" label="Office 365">
        The setup for Office 365 (or AzureAD) has a few issues that we've encountered. Please follow our [documentation on Office 365](/layers/identity/tutorials/how-to-setup-saml-login-to-aws-from-office-365/) to get the metadata file.
      </TabItem>
    </Tabs>

  </Step>

  <Step>
    ## <StepNumber/> Import the metadata file from the chosen provider.

    <Steps>
      1. Place this file inside the `aws-saml` component directory (`components/terraform/aws-saml/`)
      2. Commit this to version control. The filename should match the variable configured in `stacks/catalog/aws-saml.yaml`.
    </Steps>
  </Step>

  <Step>
    ## <StepNumber/> Deploy the SAML Integration

    ```bash
    atmos terraform apply aws-saml -s core-gbl-identity
    ```
  </Step>

  <Step>
    ## <StepNumber/> (Optional) Download AWS Extend Switch Roles Browser Extension

    We suggest using the AWS Extend Switch Roles browser extension to simplify role-switching in the AWS Console. This is optional but particularly helpful if youâ€™re not using AWS IAM Identity Center.

    Please see the [AWS Extend Switch Roles plugin](https://github.com/tilfinltd/aws-extend-switch-roles).

    Once you've downloaded the plugin, take the aws-config file from within the `rootfs/etc/aws-config` directory in your infrastructure repository. Paste this into the AWS Extend Switch Roles plugin configuration.

  </Step>
</Steps>
