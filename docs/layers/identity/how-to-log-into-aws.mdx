---
title: "Log into AWS"
sidebar_position: 50
---

# How to Log into AWS

We use Leapp to facilitate logging into AWS. Leapp is a tool that allows you to authenticate with your organization's
Identity Provider (IdP) and then assume an IAM Role in AWS. This allows you to use your organization's SSO to
authenticate with AWS.

## Requirements

Install Leapp following [Leapp documentation](https://www.leapp.cloud/download/desktop-app) or with brew:

```console
brew install --cask leapp
```

(If required) Install AWS Session Manager:

```console
brew install --cask session-manager-plugin
```

Launch Leapp

![Leapp Search](https://docs.cloudposse.com/assets/refarch/leapp-search.png)

## Setup

The following steps are required only for initial setup.

1. Launch Leapp
2. Create new Integration

![Leapp Integration](https://docs.cloudposse.com/assets/refarch/leapp-integration.png)

3. Fill out Single Sign-On configuration

<!-- prettier-ignore-start -->
```yaml
Alias: acme # This can be whatever you would like to label the Integration in Leapp
Portal URL: https://d-1111aa1a11.awsapps.com/start/ # Set this to your SSO Launch URL)
AWS Region: us-east-1 # Your primary region
Auth. Method: In-browser # Optional
```
<!-- prettier-ignore-end -->

4. Click Integration “dots” and select “Login”. This should launch a tab in your web browser.

![Leapp Integration Dots](https://docs.cloudposse.com/assets/refarch/leapp-integration-dots.png)
![Leapp Integration Login](https://docs.cloudposse.com/assets/refarch/leapp-integration-login.png)

5. Log into your IdP for your Organization and “Allow” Authorization request

6. Create a “Chained Session” from the `core-identity` account with the `IdentityDevopsTeamAccess` Role

:::info

This Permission Set will match the given Team name. For example, Developers will use `IdentityDevelopersTeamAccess` and
DevOps will use `IdentityDevopsTeamAccess`.

:::

![Leapp Chained Session](https://docs.cloudposse.com/assets/refarch/leapp-chained-session.png)

7. Fill out the Chained Session configuration for connecting to `core-identity`

```yaml
Named profile: acme-identity # This must match the profile name given in AWS config
Session Alias: acme-identity # Optional
AWS Region: us-east-1 # This must be your primary region
Role ARN: arn:aws:iam::666666666666:role/acme-core-gbl-identity-devops # This ARN depends on the given team. This example uses the "devops" team
Role Session Name: acme-identity # Optional
Assumer Session: core-identity # This must match the name of the identity account, almost always "core-identity"
```

![Leapp Chained Session Configuration](https://docs.cloudposse.com/assets/refarch/leapp-chained-session-configuration.png)

8. (Optional) Pin the new `acme-identity` IAM Role Chained Session

This makes it easier to filter to the primary session we will be used for connecting to AWS

- Go to All Sessions
- Find the new IAM Role Chained Session for `acme-identity` or whatever value you used for `Session Alias`
- Click the dots on the IAM Role Chained Session
- Select Pin Session

9. Connect to `acme-identity` IAM Role Chained Session

- Select the Session
- Click Start Session

![Leapp Start Session](https://docs.cloudposse.com/assets/refarch/leapp-start-session.png)

10. Open your terminal of choice, navigate to the `infrastructure` repository, and launch Geodesic

```console
make all
```

11. Done!

![Geodesic Check](https://docs.cloudposse.com/assets/refarch/geodesic-check.png)

## Use

After initial setup, quickly connect to AWS with the following steps:

1. Launch Leapp
2. Connect to `acme-identity` IAM Role Chained Session

![Leapp Start Session](https://docs.cloudposse.com/assets/refarch/leapp-start-session.png)

3. Open your terminal of choice, navigate to the `infrastructure` repository, and launch Geodesic

```console
make run
```

4. Done!

![Geodesic Check](https://docs.cloudposse.com/assets/refarch/geodesic-check.png)
