parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {var e={};function R(e){for(var r,a=/\+/g,$=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(a," "))},p={};r=$.exec(e);)p[o(r[1])]=o(r[2]);return p}Object.defineProperty(e,"__esModule",{value:!0});var w=R;function S(e){var r=[];for(var a in e)e.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return r.join("&")}e.deparam=w;var t=S;e.param=t;var n={};Object.defineProperty(n,"__esModule",{value:!0});var T=/^([a-z][\w-]+)\/([\w-.]+)$/i;n.default=T;var b={},U=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});var V=U(n);function W(){var e=w(location.search.substr(1)),r=null,i=null;if("issue-term"in e){if(void 0!==(r=e["issue-term"])){if(""===r)throw new Error("When issue-term is specified, it cannot be blank.");if(-1!==["title","url","pathname","og:title"].indexOf(r)){if(!e[r])throw new Error("Unable to find \""+r+"\" metadata.");r=e[r]}}}else{if(!("issue-number"in e))throw new Error("\"issue-term\" or \"issue-number\" must be specified.");if((i=+e["issue-number"]).toString(10)!==e["issue-number"])throw new Error("issue-number is invalid. \""+e["issue-number"])}if(!("repo"in e))throw new Error("\"repo\" is required.");if(!("origin"in e))throw new Error("\"origin\" is required.");var t=V.default.exec(e.repo);if(null===t)throw new Error("Invalid repo: \""+e.repo+"\"");return{owner:t[1],repo:t[2],branch:"branch"in e?e.branch:"master",configPath:"config-path"in e?e["config-path"]:"utterances.json",issueTerm:r,issueNumber:i,origin:e.origin,url:e.url,title:e.title,description:e.description}}var X=W();b.pageAttributes=X;var x={};Object.defineProperty(x,"__esModule",{value:!0});var k="https://comments.cloudposse.com";x.UTTERANCES_API=k;var c={};Object.defineProperty(c,"__esModule",{value:!0});var Y=k+"/authorize",Z=k+"/token",$=location.origin+"/components/utterances/authorized.html",_=function(){function e(){this.storageKey="OAUTH_TOKEN2",this.token=null;try{this.token=localStorage.getItem(this.storageKey)}catch(e){}}return Object.defineProperty(e.prototype,"value",{get:function(){return this.token},set:function(e){this.token=e;try{null===e?localStorage.removeItem(this.storageKey):localStorage.setItem(this.storageKey,e)}catch(e){}},enumerable:!0,configurable:!0}),e}(),aa=new _;function ba(){return window.open(Y+"?"+t({redirect_uri:$})),new Promise(function(e){return window.notifyAuthorized=e}).then(function(e){return fetch(Z+e,{mode:"cors"})}).then(function(e){return e.ok?e.json():e.text().then(function(e){return Promise.reject("Error retrieving token:\n"+e)})}).then(function(e){c.token.value=e},function(e){throw c.token.value=null,e})}c.token=aa;var ca=ba;c.login=ca;var y={};function da(e){return e=e.replace(/\s/g,""),decodeURIComponent(escape(atob(e)))}Object.defineProperty(y,"__esModule",{value:!0});var z=da;y.decodeBase64UTF8=z;var a={};Object.defineProperty(a,"__esModule",{value:!0});var f,g,A,ea="https://api.github.com/",B="application/vnd.github.VERSION.html+json",fa="application/vnd.github.VERSION.html",l="application/vnd.github.squirrel-girl-preview",ga=100;function ha(n){f=n.owner,g=n.repo,A=n.branch}var C=ha;function i(n,e){(e=e||{}).mode="cors",e.cache="no-cache";var r=new Request(ea+n,e);return r.headers.set("Accept",l),/^search\//.test(n)||null===c.token.value||r.headers.set("Authorization","token "+c.token.value),r}a.setRepoContext=C;var D={standard:{limit:Number.MAX_VALUE,remaining:Number.MAX_VALUE,reset:0},search:{limit:Number.MAX_VALUE,remaining:Number.MAX_VALUE,reset:0}};function ia(n){var e=n.headers.get("X-RateLimit-Limit"),r=n.headers.get("X-RateLimit-Remaining"),$=n.headers.get("X-RateLimit-Reset"),t=/\/search\//.test(n.url),a=t?D.search:D.standard;if(a.limit=+e,a.remaining=+r,a.reset=+$,403===n.status&&0===a.remaining){var o=new Date(0);o.setUTCSeconds(a.reset);var s=Math.round((o.getTime()-new Date().getTime())/1e3/60),i=t?"search API":"non-search APIs";console.warn("Rate limit exceeded for "+i+". Resets in "+s+" minute"+(1===s?"":"s")+".")}}function ja(n){var e=n.headers.get("link");if(null===e)return 0;var r=/\?page=([2-9][0-9]*)>; rel="next"/.exec(e);return null===r?0:+r[1]}function h(n){return fetch(n).then(function(e){return 401===e.status&&(c.token.value=null),403===e.status&&e.json().then(function(n){"Resource not accessible by integration"===n.message&&window.dispatchEvent(new CustomEvent("not-installed"))}),ia(e),"GET"===n.method&&-1!==[401,403].indexOf(e.status)&&n.headers.has("Authorization")?(n.headers.delete("Authorization"),h(n)):e})}function ka(n,e){void 0===e&&(e=!1);var r=i("repos/"+f+"/"+g+"/contents/"+n+"?ref="+A);return e&&r.headers.set("accept",fa),h(r).then(function(r){if(404===r.status)throw new Error("Repo \""+f+"/"+g+"\" does not have a file named \""+n+"\" in the \""+A+"\" branch.");if(!r.ok)throw new Error("Error fetching "+n+".");return e?r.text():r.json()}).then(function(n){if(e)return n;var r=n.content,$=z(r);return JSON.parse($)})}var la=ka;function ma(n){var e="\""+n+"\" type:issue in:title repo:"+f+"/"+g;return h(i("search/issues?q="+encodeURIComponent(e)+"&sort=created&order=asc")).then(function(n){if(!n.ok)throw new Error("Error fetching issue via search.");return n.json()}).then(function(n){return 0===n.total_count?null:(n.total_count>1&&console.warn("Multiple issues match \""+e+"\". Using earliest created."),n.items[0])})}a.loadJsonFile=la;var E=ma;function na(n){return h(i("repos/"+f+"/"+g+"/issues/"+n)).then(function(n){if(!n.ok)throw new Error("Error fetching issue via issue number.");return n.json()})}a.loadIssueByTerm=E;var F=na;function oa(n,e){var r=i("repos/"+f+"/"+g+"/issues/"+n+"/comments?page="+e+"&per_page="+ga),$=B+","+l;return r.headers.set("Accept",$),r}function pa(n,e){return h(oa(n,e)).then(function(n){if(!n.ok)throw new Error("Error fetching comments.");var e=ja(n);return n.json().then(function(n){return{items:n,nextPage:e}})})}a.loadIssueByNumber=F;var G=pa;function qa(){return null===c.token.value?Promise.resolve(null):h(i("user")).then(function(n){return n.ok?n.json():null})}a.loadCommentsPage=G;var o=qa;function ra(n,e,r,$){var t=new Request(k+"/repos/"+f+"/"+g+"/issues",{method:"POST",body:JSON.stringify({title:n,body:"# "+r+"\n\n"+$+"\n\n["+e+"]("+e+")"})});return t.headers.set("Accept",l),t.headers.set("Authorization","token "+c.token.value),fetch(t).then(function(n){if(!n.ok)throw new Error("Error creating comments container issue");return n.json()})}a.loadUser=o;var H=ra;function sa(n,e){var r=i("repos/"+f+"/"+g+"/issues/"+n+"/comments",{method:"POST",body:JSON.stringify({body:e})}),$=B+","+l;return r.headers.set("Accept",$),h(r).then(function(n){if(!n.ok)throw new Error("Error posting comment.");return n.json()})}a.createIssue=H;var p=sa;function ta(n){return h(i("markdown",{method:"POST",body:JSON.stringify({text:n,mode:"gfm",context:f+"/"+g})})).then(function(n){return n.text()})}a.postComment=p;var I=ta;a.renderMarkdown=I;var J={};Object.defineProperty(J,"__esModule",{value:!0});var j=[1e3,"second",6e4,"minute",36e5,"hour",864e5,"day",6048e5,"week",23328e5,"month"],ua={month:"short",day:"numeric",year:"numeric"};function va(e,r){var $=e-r.getTime();if($<5e3)return"just now";for(var o=0;o+2<j.length&&1.1*$>j[o+2];)o+=2;var t=j[o],a=j[o+1],s=Math.round($/t);return s>3&&o===j.length-2?"on "+r.toLocaleDateString(void 0,ua):1===s?("hour"===a?"an":"a")+" "+a+" ago":s+" "+a+"s ago"}var K=va;J.timeAgo=K;var wa,q={};function xa(e){wa=e,addEventListener("resize",r),addEventListener("load",r)}Object.defineProperty(q,"__esModule",{value:!0});var L=xa;q.startMeasuring=L;var ya=-1;function za(){var e=document.body.scrollHeight;if(e!==ya){ya=e;var $={type:"resize",height:e};parent.postMessage($,wa)}}var Aa=0;function r(){var e=Date.now();e-Aa>50&&(Aa=e,setTimeout(za,50))}var d=r;q.scheduleMeasure=d;var s={};Object.defineProperty(s,"__esModule",{value:!0});var Ba="?v=3&s=88",Ca={COLLABORATOR:"Collaborator",CONTRIBUTOR:"Contributor",MEMBER:"Member",OWNER:"Owner"},Da=function(){function e(e,r){this.comment=e,this.currentUser=r;var t=e.user,a=e.html_url,n=e.created_at,o=e.body_html,s=e.author_association;this.element=document.createElement("article"),this.element.classList.add("timeline-comment"),t.login===r&&this.element.classList.add("current-user");var l=Ca[s];this.element.innerHTML="\n      <a class=\"avatar\" href=\""+t.html_url+"\" target=\"_blank\" tabindex=\"-1\">\n        <img alt=\"@"+t.login+"\" height=\"44\" width=\"44\"\n              src=\""+t.avatar_url+Ba+"\">\n      </a>\n      <div class=\"comment\">\n        <header class=\"comment-header\">\n          <span class=\"comment-meta\">\n            <a class=\"text-link\" href=\""+t.html_url+"\" target=\"_blank\"><strong>"+t.login+"</strong></a>\n            commented\n            <a class=\"text-link\" href=\""+a+"\" target=\"_blank\">"+K(Date.now(),new Date(n))+"</a>\n          </span>\n          "+(l?"<span class=\"author-association-badge\">"+l+"</span>":"")+"\n        </header>\n        <div class=\"markdown-body markdown-body-scrollable\">\n          "+o+"\n        </div>\n      </div>",N(this.element.lastElementChild.lastElementChild)}return e.prototype.setCurrentUser=function(e){this.currentUser!==e&&(this.currentUser=e,this.comment.user.login===this.currentUser?this.element.classList.add("current-user"):this.element.classList.remove("current-user"))},e}(),M=Da;function N(e){Array.from(e.querySelectorAll("a")).forEach(function(e){e.target="_blank",e.rel="noopener"}),Array.from(e.querySelectorAll("img")).forEach(function(e){return e.onload=d}),Array.from(e.querySelectorAll("a.commit-tease-sha")).forEach(function(e){return e.href="https://github.com"+e.pathname})}s.CommentComponent=M;var O=N;s.processRenderedMarkdown=O;var v={};Object.defineProperty(v,"__esModule",{value:!0});var Ea=function(){function e(e,t){this.user=e,this.issue=t,this.timeline=[],this.count=0,this.element=document.createElement("main"),this.element.classList.add("timeline"),this.element.innerHTML="\n      <h1 class=\"timeline-header\">\n        <a class=\"text-link\" target=\"_blank\"></a>\n      </h1>",this.countAnchor=this.element.firstElementChild.firstElementChild,this.marker=document.createComment("marker"),this.element.appendChild(this.marker),this.setIssue(this.issue),this.renderCount()}return e.prototype.setUser=function(e){this.user=e;for(var t=e?e.login:null,n=0;n<this.timeline.length;n++)this.timeline[n].setCurrentUser(t);d()},e.prototype.setIssue=function(e){this.issue=e,e?this.countAnchor.href=e.html_url:this.countAnchor.removeAttribute("href")},e.prototype.appendComment=function(e){var t=new M(e,this.user?this.user.login:null);this.timeline.push(t),this.element.insertBefore(t.element,this.marker),this.count++,this.renderCount(),d()},e.prototype.renderCount=function(){this.countAnchor.textContent=this.count+" Comment"+(1===this.count?"":"s")},e}(),Fa=Ea;v.TimelineComponent=Fa;var P={};Object.defineProperty(P,"__esModule",{value:!0});var Ga="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 16\" version=\"1.1\"><path fill=\"rgb(179,179,179)\" fill-rule=\"evenodd\" d=\"M8 10.5L9 14H5l1-3.5L5.25 9h3.5L8 10.5zM10 6H4L2 7h10l-2-1zM9 2L7 3 5 2 4 5h6L9 2zm4.03 7.75L10 9l1 2-2 3h3.22c.45 0 .86-.31.97-.75l.56-2.28c.14-.53-.19-1.08-.72-1.22zM4 9l-3.03.75c-.53.14-.86.69-.72 1.22l.56 2.28c.11.44.52.75.97.75H5l-2-3 1-2z\"></path></svg>",Ha="data:image/svg+xml;base64,"+btoa(Ga),u="Nothing to preview",Ia=function(){function e(e,t){var a=this;this.user=e,this.submit=t,this.submitting=!1,this.renderTimeout=0,this.handleInput=function(){var e=a.textarea.value,t=/^\s*$/.test(e);a.submitButton.disabled=t,a.textarea.scrollHeight<450&&a.textarea.offsetHeight<a.textarea.scrollHeight&&(a.textarea.style.height=a.textarea.scrollHeight+"px",d()),clearTimeout(a.renderTimeout),t?a.preview.textContent=u:(a.preview.textContent="Loading preview...",a.renderTimeout=setTimeout(function(){return I(e).then(function(e){return a.preview.innerHTML=e}).then(function(){return O(a.preview)}).then(d)},500))},this.handleSubmit=function(e){e.preventDefault(),a.submitting||(a.submitting=!0,a.user&&(a.textarea.disabled=!0,a.submitButton.disabled=!0),a.submit(a.textarea.value).catch(function(){return 0}).then(function(){a.submitting=!1,a.textarea.disabled=!a.user,a.textarea.value="",a.submitButton.disabled=!1,a.handleClick({target:a.form.querySelector(".tabnav-tab.tab-write")}),a.preview.textContent=u}))},this.handleClick=function(e){var t=e.target;if(t instanceof HTMLButtonElement&&t.classList.contains("tabnav-tab")&&!t.classList.contains("selected")){a.form.querySelector(".tabnav-tab.selected").classList.remove("selected"),t.classList.add("selected");var n=t.classList.contains("tab-preview");a.textarea.style.display=n?"none":"",a.preview.style.display=n?"":"none",d()}},this.element=document.createElement("article"),this.element.classList.add("timeline-comment"),this.element.innerHTML="\n      <a class=\"avatar\" target=\"_blank\" tabindex=\"-1\">\n        <img height=\"44\" width=\"44\">\n      </a>\n      <form class=\"comment\" accept-charset=\"UTF-8\" action=\"javascript:\">\n        <header class=\"new-comment-header\">\n          <nav class=\"tabnav-tabs\" role=\"tablist\">\n            <button type=\"button\" class=\"tabnav-tab tab-write selected\"\n                    role=\"tab\" aria-selected=\"true\">\n              Write\n            </button>\n            <button type=\"button\" class=\"tabnav-tab tab-preview\"\n                    role=\"tab\">\n              Preview\n            </button>\n          </nav>\n        </header>\n        <div class=\"comment-body\">\n          <textarea placeholder=\"Leave a comment\" aria-label=\"comment\"></textarea>\n          <div class=\"markdown-body\" style=\"display: none\">\n            "+u+"\n          </div>\n        </div>\n        <footer class=\"comment-footer\">\n          <a class=\"text-link markdown-info\" tabindex=\"-1\" target=\"_blank\"\n             href=\"https://guides.github.com/features/mastering-markdown/\">\n            Styling with Markdown is supported\n          </a>\n          <button class=\"btn btn-primary\" type=\"submit\">Comment</button>\n        </footer>\n      </form>",this.avatarAnchor=this.element.firstElementChild,this.avatar=this.avatarAnchor.firstElementChild,this.form=this.avatarAnchor.nextElementSibling,this.textarea=this.form.firstElementChild.nextElementSibling.firstElementChild,this.preview=this.form.firstElementChild.nextElementSibling.lastElementChild,this.submitButton=this.form.lastElementChild.lastElementChild,this.setUser(e),this.textarea.addEventListener("input",this.handleInput),this.form.addEventListener("submit",this.handleSubmit),this.form.addEventListener("click",this.handleClick),Ja(this.textarea)}return e.prototype.setUser=function(e){this.user=e,this.submitButton.textContent=e?"Comment":"Sign in to comment",this.submitButton.disabled=!!e,e?(this.avatarAnchor.href=e.html_url,this.avatar.alt="@"+e.login,this.avatar.src=e.avatar_url+"?v=3&s=88"):(this.avatarAnchor.removeAttribute("href"),this.avatar.alt="@anonymous",this.avatar.src=Ha,this.textarea.disabled=!0)},e.prototype.clear=function(){this.textarea.value=""},e}(),Q=Ia;function Ja(e){var t=function e(){removeEventListener("mousemove",d),removeEventListener("mouseup",e)};e.addEventListener("mousedown",function(){addEventListener("mousemove",d),addEventListener("mouseup",t)})}P.NewCommentComponent=Q;var m={};Object.defineProperty(m,"__esModule",{value:!0});function Ka(){return null!==b.pageAttributes.issueNumber?F(b.pageAttributes.issueNumber):E(b.pageAttributes.issueTerm)}function La(e,t){L(b.pageAttributes.origin);var r=new v.TimelineComponent(t,e);if(document.body.appendChild(r.element),e&&e.comments>0&&G(e.number,1).then(function(e){return e.items.forEach(function(e){return r.appendComment(e)})}),!e||!e.locked){var u=new Q(t,function(a){if(t)return(e?p(e.number,a):H(b.pageAttributes.issueTerm,b.pageAttributes.url,b.pageAttributes.title,b.pageAttributes.description).then(function(t){return e=t,r.setIssue(e),p(e.number,a)})).then(function(e){r.appendComment(e),u.clear()});return c.login().then(function(){return o()}).then(function(e){t=e,r.setUser(t),u.setUser(t)})});r.element.appendChild(u.element),d()}}C(b.pageAttributes),Promise.all([Ka(),o()]).then(function(e){return La(e[0],e[1])}),addEventListener("not-installed",function e(){removeEventListener("not-installed",e),document.querySelector(".timeline").insertAdjacentHTML("afterbegin","\n  <div class=\"flash flash-error flash-not-installed\">\n    Error: utterances is not installed on <code>"+b.pageAttributes.owner+"/"+b.pageAttributes.repo+"</code>.\n    If you own this repo,\n    <a href=\"https://github.com/apps/utterances\" target=\"_blank\"><strong>install the app</strong></a>.\n    Read more about this change in\n    <a href=\"https://github.com/utterance/utterances/pull/25\" target=\"_blank\">the PR</a>.\n  </div>")});if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=m}else if(typeof define==="function"&&define.amd){define(function(){return m})}return{"fHsu":m,"ieWq":e};});